<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Display</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="index.css">
    <style>
        .card {
            background-color: transparent;
            border: none;
            border-radius: 0;
        }

        .card-img-top {
            max-width: 100%;
            max-height: 200px;
            object-fit: cover;
        }
        .headnews{
           
            font-size: xx-large;
            font-weight: bolder;
            margin-top: 1em;
            padding-top: 1em;
           color: black;
            text-align: center;
            margin-bottom: 2em;
          
            
        }
        .body2{
            background-color: rgb(247, 237, 223);
            border-radius: .2em;
        }
    
    /* Custom loading animation */
    .loading-balls {
        display: inline-block;
        width: 20px;
        height: 20px;
        background-color: #333;
        border-radius: 50%;
        animation: bounce 0.6s infinite alternate;
        margin-bottom: 10px;
    }

    @keyframes bounce {
        to {
            transform: translateY(-20px);
        }
    }

    /* Hide the loading element initially */
    #loading {
        display: none;
    }


    </style>
</head>

    <nav  class="navbar navbar-expand-lg navbar-dark bg-transparent ">
        <div class="container-fluid navs">
            <!--logo-->
            <h3 class="osimname fw-bolder"> OSIM FOUNDATION</h3>
    
            <button class="navbar-toggler shadow-none border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
    
            <div class="sidebar offcanvas offcanvas-start " tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">OSIM FOUNDATION</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <!--sidebar-->
                <div class="offcanvas-body d-flex flex-column flex-lg-row p-4 p-lg-1">
                    <ul class="navbar-nav justify-content-center align-items-center fs-6 flex-grow-1 pe-3">
                        <li class="nav-item">
                            <a class="nav-link active mx-2" aria-current="page" href="index.html" style="color: white;">Home</a>
                        </li>
                        <li class="nav-item mx-2">
                            <a class="nav-link" href="history.html">Our History</a>
                        </li>
                        <!-- Modify your "Contact" link -->
                       <li class="nav-item mx-2">
                       <a class="nav-link scroll-to-contact" href=".downUs">Contact</a>
                       </li>

                        <li class="nav-item mx-2 dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" id="aboutUsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                About Us
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="aboutUsDropdown">
                                <li><a class="dropdown-item" href="ourTeam.html">Our Team</a></li>
                                <li><a class="dropdown-item" href="project.html">Our Work</a></li>
                            </ul>
                        </li>
                    </ul>
                   
    
                    <!-- Add an element for displaying the user's email with Bootstrap icon (this will initially be hidden) -->
                    <p id="userEmail" style="display: none; color: white; font-size: 18px;">
                        <i class="bi bi-person-circle"></i> <span id="userEmailText"></span>
                    </p>
                </div>
            </div>
        </div>
    </nav>
    
   


<body>
    <div class="container body2">
        <div class="container">
            <h1 class="container headnews"> OUR TRIPS AND EVENTS</h1>
        </div>
    
        <div class="container mt-5">
            <!-- Custom loading element -->
            <div id="loading" class="text-center">
                <div class="loading-balls"></div>
                <p>Loading
                    ...</p>
            </div>
    
            <!-- News entries will be displayed here -->
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3" id="news-container">
                <!-- News entries will be displayed here -->
            </div>
        </div>
    </div>
    <div class="downUs">
        <div class="container mt-5">
            <div class="row">
                <!-- Links Section -->
                <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
                    <div class="down">
                        <h2 class="display-5">Our Home</h2>
                        <img src="images/longidomap (2).png" alt="map" usemap="#usefulLinksMap" class="mapL">
                    </div>
                </div>
        
                <!-- Contacts Section -->
                <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
                    <div class="down">
                        <h2 class="display-5">Contact</h2>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-phone"></i> Phone:+255769933368</li>
                            <li><i class="fas fa-phone"></i> Phone:+255766876286</li>
                            <li><i class="fas fa-envelope"></i> Email: info@OsimFoundation.org</li>
                        </ul>
                    </div>
                </div>
        
                <!-- Follow Us Section -->
                <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
                    <div class="down">
                        <h2 class="display-5">Follow Us</h2>
                        
                        <div class="social-icons">
                            <a class="aboutUs" href="#"><i class="bi bi-facebook"></i> OsimFoundation</a>
                            <a class="aboutUs" href="#"><i class="bi bi-twitter-x"></i> OsimFoundation</a>
                            <a class="aboutUs" href="#"><i class="bi bi-instagram"></i> OsimFoundation</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
         <div class="me">
          <footer class="text-center">
                <div class="container">
                    <p>Designed by <strong>AskaTechForge</strong> &bull;
                    <p>&copy; 2024 Osim Foundation . All rights reserved.</p>
                </div>
            </footer>
        </div>
            

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script type="module">
        // Import the Firestore SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
        import { getFirestore, collection, getDocs, onSnapshot } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";
    
        // Your Firebase configuration
        const firebaseConfig = {
    apiKey: "AIzaSyAh2op_p29Oe1YNUmoXzOP_xgrqK7LcqRM",
    authDomain: "osim-foundation.firebaseapp.com",
    projectId: "osim-foundation",
    storageBucket: "osim-foundation.appspot.com",
    messagingSenderId: "401345535402",
    appId: "1:401345535402:web:bba44429e25b6250e69fd3",
    measurementId: "G-9BRRBECHJF"
  };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const firestore = getFirestore(app);
    
        // Reference to the news container and loading element
        const newsContainer = document.getElementById("news-container");
        const loadingElement = document.getElementById("loading");
    
        // Function to fetch and display news entries
        function fetchAndDisplayNews() {
            loadingElement.style.display = "block"; // Show loading element
    
            // Instead of using the Realtime Database, use Firestore collection reference
            const newsRef = collection(firestore, "news");
    
            // Use onSnapshot to listen to real-time updates
            onSnapshot(newsRef, (querySnapshot) => {
                loadingElement.style.display = "none"; // Hide loading element
    
                const newsData = [];
                querySnapshot.forEach((doc) => {
                    newsData.push(doc.data());
                });
    
                // Display the news entries
                displayNews(newsData);
            });
        }
    
        // Function to display news entries
        function displayNews(newsData) {
            newsContainer.innerHTML = ""; // Clear previous news entries
    
            newsData.forEach((newsEntry) => {
                const newsCard = createNewsCard(newsEntry);
                newsContainer.appendChild(newsCard);
            });
        }
    
        // Function to create a news card
        function createNewsCard(newsEntry) {
            const newsCard = document.createElement("div");
            newsCard.className = "card mb-3";
    
            // Create an image element for the news card
            if (newsEntry.imageUrl) {
                const image = document.createElement("img");
                image.src = newsEntry.imageUrl;
                image.className = "card-img-top";
                newsCard.appendChild(image);
            }
    
            // Create the card body
            const cardBody = document.createElement("div");
            cardBody.className = "card-body";
    
            // Add the title
            const title = document.createElement("h5");
            title.className = "card-title";
            title.textContent = newsEntry.title;
            cardBody.appendChild(title);
    
            // Create the mini-title
            const miniTitle = document.createElement("p");
            miniTitle.className = "card-subtitle mb-2 text-muted";
            miniTitle.textContent = newsEntry.miniTitle || "Mini Title";
            cardBody.appendChild(miniTitle);
    
            // Create the content
            const content = document.createElement("p");
            content.className = "card-text";
            content.style.display = "none"; // Initially hide content
            content.textContent = newsEntry.content;
            cardBody.appendChild(content);
    
            // Attach a click event to open the news_detail.html page in the same tab with data
            newsCard.addEventListener("click", function () {
                // Encode data to pass it as a URL parameter
                const data = btoa(JSON.stringify(newsEntry));
                const url = `news_detail.html?data=${data}`;
                window.location.href = url;
            });
    
            newsCard.appendChild(cardBody);
            return newsCard;
        }
    
        // Call the function to fetch and display news entries
        fetchAndDisplayNews();
    </script>
    
    
</body>
</html>
